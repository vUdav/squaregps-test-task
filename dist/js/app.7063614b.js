(function(){"use strict";var t={4818:function(t,e,s){var r=s(144),n=s(1096),a=s(5378),o=s(8983),i=s(7179),d=s(5057),l=s(248),u=s(1908),c=s(8228),m=s(217),p=s(3551),f=s(7575),h=s(5234),v=s(2370),g=function(){var t=this,e=t._self._c;return e(n.Z,[e(a.Z,{attrs:{app:"",color:"primary",dark:""}},[e(o.Z,{staticClass:"d-md-none",on:{click:function(e){t.drawer=!0}}}),e(v.qW,{staticClass:"d-md-none"},[t._v(t._s(t.title))]),t._l(t.menu,(function(s,r){return e(i.Z,{key:r,staticClass:"d-none d-md-inline-flex",attrs:{plain:"",exact:"",to:{name:s.route}}},[e(d.Z,{attrs:{left:""}},[t._v(t._s(s.icon))]),t._v(" "+t._s(t.$t(s.title))+" ")],1)})),e(h.Z),e("SwitchLang",{on:{change:t.changeLang}})],2),e(f.Z,{staticClass:"d-md-none",attrs:{absolute:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(l.Z,{attrs:{nav:"",dense:""}},t._l(t.menu,(function(s,r){return e(u.Z,{key:r,attrs:{"exact-path":"",to:{name:s.route},"active-class":"primary--text"}},[e(c.Z,[e(d.Z,[t._v(t._s(s.icon))])],1),e(m.V9,[t._v(t._s(t.$t(s.title)))])],1)})),1)],1),e(p.Z,[e("router-view")],1)],1)},_=[],k=s(1495),Z=function(){var t=this,e=t._self._c;return e(k.Z,{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:r}){return[e(i.Z,t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),s),[e(d.Z,[t._v("mdi-translate")])],1)]}}])},[e(l.Z,t._l(t.langList,(function(s){return e(u.Z,{key:s.value,attrs:{link:""},on:{click:function(e){return t.changeLang(s.value)}}},[e(m.V9,[t._v(t._s(s.name))])],1)})),1)],1)},y=[],S={data(){return{langList:[{name:"English",value:"en"},{name:"Русский",value:"ru"}]}},methods:{switchLang(t){localStorage.setItem("lang",t),this.$vuetify.lang.current=t,this.$i18n.locale=t},initLang(){const t=localStorage.getItem("lang");t&&this.switchLang(t)}}},b={mixins:[S],name:"SwitchLang",data:()=>({langList:[{name:"English",value:"en"},{name:"Русский",value:"ru"}]}),methods:{changeLang(t){this.switchLang(t),this.$emit("change",t)}}},A=b,L=s(1001),w=(0,L.Z)(A,Z,y,!1,null,null,null),x=w.exports,P={mixins:[S],name:"App",components:{SwitchLang:x},data:()=>({drawer:!1,title:null,menu:[{title:"menu.task",icon:"mdi-checkbox-multiple-marked",route:"task"},{title:"menu.map",icon:"mdi-map",route:"map"}]}),watch:{$route:{handler(t){this.changeTitle(t)},immediate:!0}},methods:{changeTitle(t){const e=this.$t(`menu.${t.name}`);this.title=e,document.title=`SquareGPS - ${e}`},changeLang(){this.changeTitle(this.$route)}},created(){this.initLang()}},M=P,$=(0,L.Z)(M,g,_,!1,null,null,null),O=$.exports,T=s(629);const C="addressList";r.ZP.use(T.ZP);var j=new T.ZP.Store({state:{isPendingGetAddresses:!1,isPendingSetAddress:!1,addressList:[]},mutations:{setAddresses(t,e){t.addressList=e},setStatusGetAddresses(t,e){t.isPendingGetAddresses=e},setStatusSetAddress(t,e){t.isPendingSetAddress=e}},actions:{getAddresses({commit:t}){t("setStatusGetAddresses",!0),setTimeout((()=>{t("setStatusGetAddresses",!1);const e=JSON.parse(localStorage.getItem(C))||[];t("setAddresses",e)}),2e3)},async setAddress({commit:t,state:e},{coords:s}){t("setStatusSetAddress",!0);const r=await fetch(`https://geocode.maps.co/reverse?lat=${s.lat}&lon=${s.lng}`).then((t=>t.json()));if(r.error)t("setStatusSetAddress",!1),alert(r.error);else{const n={id:e.addressList.length+1,coords:s,address:r.display_name},a=[...e.addressList,n];setTimeout((()=>{t("setStatusSetAddress",!1),localStorage.setItem(C,JSON.stringify(a)),t("setAddresses",a)}),2e3)}}}}),I=s(2250),q=s(9101),V=s(4556);r.ZP.use(I.Z);var G=new I.Z({icons:{iconfont:"mdi"},lang:{locales:{ru:q.Z,en:V.Z},current:"ru"}}),z=s(7152);const E=s(2182),R=s(2007);r.ZP.use(z.Z);const B={en:R,ru:E},J=new z.Z({locale:"ru",messages:B});var N=J,U=s(5352),D=s(2727),F=s(8380),W=s(7889),Y=s(5243);r.ZP.component("l-map",U.Z),r.ZP.component("l-tile-layer",D.Z),r.ZP.component("l-marker",F.Z),r.ZP.component("l-popup",W.Z),delete Y.Icon.Default.prototype._getIconUrl,Y.Icon.Default.mergeOptions({iconRetinaUrl:s(6431),iconUrl:s(7093),shadowUrl:s(8858)});var H=s(8345),K=s(6035),Q=function(){var t=this,e=t._self._c;return e(K.Z,[e("h1",[t._v("Тестовое задание SquareGPS")]),e("p",[t._v(" Необходимо с помощью "),e("strong",[t._v("Vuejs")]),t._v(", "),e("strong",[t._v("Vuex")]),t._v(", "),e("strong",[t._v("VueRouter")]),t._v(", "),e("strong",[t._v("Vuetify")]),t._v(" написать приложение."),e("br"),t._v(" Хэдер приложения должен содержать меню из 2-х пунктов: "),e("strong",[t._v("О задании")]),t._v(" и "),e("strong",[t._v("Карта")]),t._v("."),e("br"),t._v(" В основной части приложения должно отображаться содержимое разделов. ")]),e("h2",[t._v("Раздел “О задании”")]),e("p",[t._v("В разделе должен быть текст этого задания, сверстанный аналогично.")]),e("h2",[t._v("Раздел “Карта”")]),e("p",[t._v(" На экране должны быть карта и список (см пример):"),e("br"),e("ol",[e("li",[t._v("При клике на кнопку добавления, карта должна перейти в режим добавления маркера: в месте клика должен появится маркер, а в списке - запись с адресом точки")])])]),e("p",[t._v(" Для поиска адреса можно использовать любое бесплатное API для геокодирования, например: "),e("a",{attrs:{href:"https://geocode.maps.co/",target:"_blank"}},[t._v(" https://geocode.maps.co/ ")])]),e("p",[t._v(" В случае, если адрес не найден, необходимо вывести ошибку и не добавлять маркер в список. ")]),e("p",[e("ol",{attrs:{start:"2"}},[e("li",[t._v("При клике на маркер должна подсвечиваться запись в списке")]),e("li",[t._v("При клике на запись в списке карта должна центрироваться на маркере")]),e("li",[t._v("Маркеры должны храниться локально и не пропадать после перезагрузки страницы")]),e("li",[t._v("В адресной строке должен отображаться id выбранного маркера")])])]),e("p",[t._v(" Локальное хранение данных должно быть организовано в виде сервиса, эмулирующего бекенд. (Необходим класс Backend, который псевдо-асинхронно сохраняет данные в localStorage) ")]),e("h3",[t._v("Дополнительно:")]),e("p",[e("ol",[e("li",[t._v("Продумать отображение на мобильных устройствах")]),e("li",[t._v("Предусмотреть локализацию")]),e("li",[t._v("Необходимо с помощью "),e("strong",[t._v("jest")]),t._v(" написать 1 модульный тест на любой компонент")])])]),e("p",[e("strong",[t._v("Напоминание:")]),t._v(" тестовое задание призвано показать умение писать хороший модульный код, а также умение пользоваться указанными технологиями и не только. Этим кодом нужно гордиться. ")]),e("p",[t._v("Пример:")]),e("img",{attrs:{src:s(2098),alt:"example",width:"100%"}})])},X=[],tt={name:"TaskView"},et=tt,st=(0,L.Z)(et,Q,X,!1,null,null,null),rt=st.exports,nt=s(9650),at=s(4437),ot=s(5294),it=function(){var t=this,e=t._self._c;return t.isPending?e("Loader"):e(ot.Z,{staticClass:"fill-height",attrs:{"no-gutters":""}},[t.isPendingSetAddress?e("Loader"):t._e(),e(at.Z,{staticClass:"d-none d-md-block overflow-auto fill-height",attrs:{md:"3"}},[e("AddressList",{attrs:{list:t.addressList}}),e(nt.Z,{model:{value:t.isShowAddressListSheet,callback:function(e){t.isShowAddressListSheet=e},expression:"isShowAddressListSheet"}},[e("AddressList",{attrs:{list:t.addressList}})],1)],1),e(at.Z,{attrs:{cols:"12",md:"9"}},[e("Map",{ref:"map",attrs:{markers:t.addressList,addMode:t.isAddMarker},on:{addMarker:t.onAddMarker,ready:t.onReady}}),e(i.Z,{staticClass:"d-md-none",attrs:{color:"primary",small:"",fixed:"",left:"",bottom:"",fab:""},on:{click:function(e){t.isShowAddressListSheet=!0}}},[e(d.Z,[t._v("mdi-format-list-numbered")])],1),t.isAddMarker?e(i.Z,{attrs:{color:"error",fixed:"",right:"",bottom:"",fab:""},on:{click:function(e){t.isAddMarker=!1}}},[e(d.Z,[t._v("mdi-close")])],1):e(i.Z,{attrs:{color:"success",fixed:"",right:"",bottom:"",fab:""},on:{click:function(e){t.isAddMarker=!0}}},[e(d.Z,[t._v("mdi-plus")])],1)],1)],1)},dt=[],lt=s(4635),ut=s(2680),ct=function(){var t=this,e=t._self._c;return e(l.Z,{attrs:{nav:"",flat:""}},[e(ut.Z,{staticClass:"text-h5"},[t._v(t._s(t.$t("map.markers")))]),t.list.length?t._l(t.list,(function(s){return e(u.Z,{key:s.id,attrs:{exact:"",to:{name:"map",query:{id:s.id}},"active-class":"primary--text","two-line":""}},[e(m.km,[e(m.V9,[t._v(" "+t._s(t.$t("map.marker"))+" #"+t._s(s.id)+" ")]),e(m.oZ,[t._v(t._s(s.address))])],1)],1)})):e(lt.Z,{attrs:{type:"info"}},[t._v(t._s(t.$t("map.addressesListEmpty")))])],2)},mt=[],pt={name:"AddressList",props:{list:{type:Array,default:()=>[]}}},ft=pt,ht=(0,L.Z)(ft,ct,mt,!1,null,null,null),vt=ht.exports,gt=s(8236),_t=s(6275),kt=function(){var t=this,e=t._self._c;return e(gt.Z,{attrs:{absolute:"","z-index":"10000"}},[e(_t.Z,{staticClass:"primary--text",attrs:{size:70,indeterminate:""}})],1)},Zt=[],yt={name:"Loader"},St=yt,bt=(0,L.Z)(St,kt,Zt,!1,null,null,null),At=bt.exports,Lt=function(){var t=this,e=t._self._c;return e("l-map",{ref:"map",staticStyle:{height:"100%"},attrs:{zoom:t.zoom,center:t.center},on:{click:t.onClickMap,ready:t.onReady}},[e("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._l(t.markers,(function(s){return e("l-marker",{key:s.id,attrs:{"lat-lng":s.coords}},[e("l-popup",[e("div",[t._v("ID: "+t._s(s.id))]),e("div",[t._v(t._s(s.address))])])],1)}))],2)},wt=[],xt={name:"Map",props:{markers:{type:Array,default:()=>[]},addMode:{type:Boolean,default:!1}},data(){return{url:"https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15,center:[51.505,-.159]}},methods:{onClickMap(t){this.addMode&&this.$emit("addMarker",t.latlng)},fitBounds(t){const e=this.$refs.map.mapObject;e.flyTo(t,this.zoom)},onReady(){this.$emit("ready")}}},Pt=xt,Mt=(0,L.Z)(Pt,Lt,wt,!1,null,null,null),$t=Mt.exports,Ot={name:"MapView",components:{AddressList:vt,Loader:At,Map:$t},data(){return{isShowAddressListSheet:!1,isAddMarker:!1}},watch:{"$route.query.id":{handler(t){t&&this.goToMarker(parseInt(t))}}},methods:{...(0,T.nv)(["getAddresses","setAddress"]),onAddMarker(t){this.isAddMarker=!1,this.setAddress({coords:t}),this.$refs.map.fitBounds([t.lat,t.lng])},goToMarker(t){const e=this.addressList.find((e=>e.id===t));e&&this.$refs.map.fitBounds([e.coords.lat,e.coords.lng])},onReady(){this.$route.query.id&&this.goToMarker(parseInt(this.$route.query.id))}},computed:{...(0,T.rn)({isPending:t=>t.isPendingGetAddresses,isPendingSetAddress:t=>t.isPendingSetAddress,addressList:t=>t.addressList})},created(){this.getAddresses()}},Tt=Ot,Ct=(0,L.Z)(Tt,it,dt,!1,null,null,null),jt=Ct.exports;r.ZP.use(H.ZP);const It=[{path:"/",name:"task",component:rt},{path:"/map",name:"map",component:jt}],qt=new H.ZP({mode:"history",base:"/",routes:It});var Vt=qt;r.ZP.config.productionTip=!1,new r.ZP({router:Vt,store:j,vuetify:G,i18n:N,render:t=>t(O)}).$mount("#app")},2098:function(t,e,s){t.exports=s.p+"img/example.a056a046.png"},2007:function(t){t.exports=JSON.parse('{"menu":{"task":"About task","map":"Map"},"map":{"marker":"Marker","markers":"Markers","addressesListEmpty":"You don\'t have any added markers"}}')},2182:function(t){t.exports=JSON.parse('{"menu":{"task":"О задании","map":"Карта"},"map":{"marker":"Маркер","markers":"Маркеры","addressesListEmpty":"У вас нет ни одного добавленного маркера"}}')}},e={};function s(r){var n=e[r];if(void 0!==n)return n.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,r,n,a){if(!r){var o=1/0;for(u=0;u<t.length;u++){r=t[u][0],n=t[u][1],a=t[u][2];for(var i=!0,d=0;d<r.length;d++)(!1&a||o>=a)&&Object.keys(s.O).every((function(t){return s.O[t](r[d])}))?r.splice(d--,1):(i=!1,a<o&&(o=a));if(i){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,n,a]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,a,o=r[0],i=r[1],d=r[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(d)var u=d(s)}for(e&&e(r);l<o.length;l++)a=o[l],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(u)},r=self["webpackChunksquaregps_test_task"]=self["webpackChunksquaregps_test_task"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(4818)}));r=s.O(r)})();
//# sourceMappingURL=app.7063614b.js.map